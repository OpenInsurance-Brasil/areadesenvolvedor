on:
  push:
    branches: [ master ]
    tags:
      - v1.*

name: Create Slate Documentation on Push

jobs:
  action-filter:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v2
      - name: Build documentation
        uses: docker://decathlon/slate-builder-action:latest
        env:
          DOC_BASE_FOLDER: docs/
          ZIP_BUILD: false
      - name: Deploy to GitHub Pages
        uses: maxheld83/ghpages@v0.3.0
        env:
          GH_PAT: ${{ secrets.GH_PAT }}
          BUILD_DIR: docs/build/
